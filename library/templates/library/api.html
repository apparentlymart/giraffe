{% extends "library/base.html" %}

{% block grid %}

    <div id="api-request" class="span-10">
        <form>
            <p>
                <select id="api-request-method">
                    <option>GET</option>
                    <option>POST</option>
                    <option>PUT</option>
                    <option>DELETE</option>
                </select>
                <input id="api-request-path" value="/api">
            </p>
            <p><textarea id="api-request-body"></textarea></p>

            <p>
                <a id="api-request-button" class="button">
                    Perform awesomeness
                </a>
            </p>
        </form>
    </div>

    <script type="text/javascript">
    $(document).ready(function () {
        $('#api-request-button').click(function (e) {
            var method = $('#api-request-method option:selected').val();
            var path = $('#api-request-path').val();
            var method_has_body = method != "GET" && method != "DELETE";
            $.ajax({
                dataType: 'text',
                type: method,
                data: (method_has_body ? $('#api-request-body').val() : null),
                contentType: 'application/json',
                processData: false,
                url: path,
                complete: function (xhr, status) {
                    $('#api-result-about').text(method + " " + path);
                    $('#api-result-body').text(xhr.responseText);
                }
            });
        });
    });
    </script>

    <div id="api-result" class="span-10 prefix-2">
        <p id="api-result-about">&nbsp;</p>
        <p><pre id="api-result-body"></pre></p>
    </div>

{% endblock %}
