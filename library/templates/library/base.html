<!DOCTYPE html>
<html><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>{% block htmltitle %}giraffe{% endblock %}</title>

    <link href="{% url static path="style.css" %}" rel="stylesheet" type="text/css" media="screen">
    <script type="text/javascript" src="{% url static path="jquery.js" %}"></script>
    <script type="text/javascript" src="{% url static path="thickbox.js" %}"></script>

    <script type="text/javascript">
        function tb_show_inline(that, id, width, height) {
            var url = "#TB_inline?inlineId=" + id;
            if (height) url += "&height=" + height;
            if (width) url += "&width=" + width;
            tb_show(that.title, url, false);
            that.blur();
            return false;
        }

        function tb_inline_shower(id, width, height) {
            return function () {
                return tb_show_inline(this, id, width, height);
            };
        }
    </script>

    {% block htmlhead %}{% endblock %}
</head><body>

    <div id="title">
        <div class="grid">
            <div class="span-10">
                <h1><a href="{% url home %}"><img src="{% url static path="bee.png" %}" alt="Best Endtimes Ever"></a></h1>
            </div>
            <div id="greets" class="span-12 prefix-1">
                {% if request.user.is_anonymous %}
                    <p><a id="sign-in-link" href="{% url login %}">Sign in</a></p>
                {% else %}
                    <p>Sup, {{ request.user.name }}. <a href="{% url logout %}">Sign out</a></p>
                {% endif %}
            </div>
            <br style="clear: both;">
        </div>
    </div>

    <div class="grid showgrid">

        {% if flash %}
            <div class="span-24 last">
                {% for value in flash.values %}
                    <p class="flash">{{ value }}</p>
                {% endfor %}
            </div>
        {% endif %}

        {% block grid %}
        <div class="span-16">
            {% block content %}{% endblock %}
        </div>

        <div class="span-5 prefix-2">
            {% block sidebar %}
            <!-- this is where the sidebar would go if there were one -->
            {% endblock %}
        </div>
        {% endblock %}
    </div>

    {% if request.user.is_anonymous %}
        <div id="dialog-signin" class="dialog">
            <div id="dialog-signin-step-1" class="dialog-signin-step">
                <p>Do you have a blog or web profile with <strong>OpenID</strong>? Enter it here:</p>

                <form method="POST" action="{% url library.views.auth.start_openid %}">
                    <p><input class="openid" name="openid_url"> <input type="submit" value="Sign in"></p>
                </form>

                <p><a href="#" id="dialog-signin-next-1" class="button red-button">I don't have an OpenID</a></p>
            </div>

            <div id="dialog-signin-step-2" class="dialog-signin-step">
                <p>Do you have a <strong>TypePad</strong>, <strong>LiveJournal</strong>, or <strong>Dreamwidth</strong> profile? You can sign in with one of those.</p>

                <form method="POST" action="{% url library.views.auth.start_openid %}">
                    <input type="hidden" name="openid_pattern" value="http://profile.typepad.com/{name}">
                    <p><input class="openid typepad" name="openid_username"> <input type="submit" value="Sign in with TypePad"></p>
                </form>

                <form method="POST" action="{% url library.views.auth.start_openid %}">
                    <input type="hidden" name="openid_pattern" value="http://{name}.livejournal.com/">
                    <p><input class="openid livejournal" name="openid_username"> <input type="submit" value="Sign in with LiveJournal"></p>
                </form>

                <form method="POST" action="{% url library.views.auth.start_openid %}">
                    <input type="hidden" name="openid_pattern" value="http://{name}.dreamwidth.org/">
                    <p><input class="openid dreamwidth" name="openid_username"> <input type="submit" value="Sign in with Dreamwidth"></p>
                </form>

                <p><a href="#" id="dialog-signin-next-2" class="button red-button">I don't have any of those</a></p>
            </div>

            <div id="dialog-signin-step-3" class="dialog-signin-step">
                <p>Hmm, do you have a <strong>Google</strong> or <strong>Yahoo!</strong> account?</p>

                <form method="POST" action="{% url library.views.auth.start_openid %}">
                    <input type="hidden" name="openid_url" value="https://www.google.com/accounts/o8/id">
                    <p><img src="{% url static path="signin/google.png" %}"> <input type="submit" value="I have a Google account"></p>
                </form>

                <form method="POST" action="{% url library.views.auth.start_openid %}">
                    <input type="hidden" name="openid_url" value="http://yahoo.com/">
                    <p><img src="{% url static path="signin/yahoo.png" %}"> <input type="submit" value="I have a Yahoo! account"></p>
                </form>

                <p><a href="#" id="dialog-signin-next-3" class="button red-button">I don't have either of those either</a></p>
            </div>

            <div id="dialog-signin-step-4" class="dialog-signin-step">
                <p>I'm afraid those are the only ways to sign in right now. If you really want to sign in, you can register a new account at one of those sites.</p>

                <ul>
                    <li><a href="http://www.livejournal.com/">LiveJournal</a></li>
                    <li><a href="http://www.dreamwidth.org/">Dreamwidth</a></li>
                    <li><a href="https://www.google.com/accounts/">Google</a></li>
                    <li><a href="http://login.yahoo.com/">Yahoo!</a></li>
                </ul>
            </div>
        </div>

        <script type="text/javascript">
        $(document).ready(function () {
            $('#sign-in-link').click(function () {
                $('.dialog-signin-step').hide();
                $('#dialog-signin-step-1').show();
                return tb_show_inline(this, "dialog-signin", 400, 300);
            });
            $('#dialog-signin-next-1').click(function () {
                $('.dialog-signin-step').hide();
                $('#dialog-signin-step-2').show();
                return false;
            });
            $('#dialog-signin-next-2').click(function () {
                $('.dialog-signin-step').hide();
                $('#dialog-signin-step-3').show();
                return false;
            });
            $('#dialog-signin-next-3').click(function () {
                $('.dialog-signin-step').hide();
                $('#dialog-signin-step-4').show();
                return false;
            });
        });
        </script>
    {% endif %}

</body></html>
